<VirtualHost *:80>
  ServerAdmin noc@linkorb.com
  DocumentRoot /app/public
  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined

  # to avoid clickjacking
  Header set X-Frame-Options "sameorigin"

  # Content Security Policies:
  Header set Content-Security-Policy: "frame-src *.linkorb.com *.upr.io *.zwangerenportaal.nl *.onatal.nl *.perinatologie.nl *.onatal.eu;"

  # Protect against MIME sniffing vulnerabilities
  Header set X-Content-Type-Options nosniff

  Header set Access-Control-Allow-Origin "*"
  Header set Referrer-Policy "no-referrer-when-downgrade"

  # Permissions policies, used to be called feature policies
  # source: https://github.com/w3c/webappsec-permissions-policy/blob/main/features.md
  Header set Permissions-Policy: accelerometer()
  Header set Permissions-Policy: ambient-light-sensor()
  Header set Permissions-Policy: autoplay()
  Header set Permissions-Policy: battery()
  Header set Permissions-Policy: bluetooth()
  Header set Permissions-Policy: camera()
  Header set Permissions-Policy: cross-origin-isolated()
  Header set Permissions-Policy: display-capture()
  Header set Permissions-Policy: encrypted-media()
  Header set Permissions-Policy: execution-while-not-rendered()
  Header set Permissions-Policy: execution-while-out-of-viewport()
  Header set Permissions-Policy: fullscreen()
  Header set Permissions-Policy: geolocation()
  Header set Permissions-Policy: gyroscope()
  Header set Permissions-Policy: hid()
  Header set Permissions-Policy: idle-detection()
  Header set Permissions-Policy: keyboard-map()
  Header set Permissions-Policy: magnetometer()
  Header set Permissions-Policy: microphone()
  Header set Permissions-Policy: midi()
  Header set Permissions-Policy: navigation-override()
  Header set Permissions-Policy: payment()
  Header set Permissions-Policy: picture-in-picture()
  Header set Permissions-Policy: publickey-credentials-get()
  Header set Permissions-Policy: screen-wake-lock()
  Header set Permissions-Policy: serial()
  Header set Permissions-Policy: sync-xhr()
  Header set Permissions-Policy: usb()
  Header set Permissions-Policy: web-share()
  Header set Permissions-Policy: xr-spatial-tracking()

  <Directory "/app/public">
    FallbackResource "/index.php"
    Options -Indexes +FollowSymLinks MultiViews
    AllowOverride All
    Require all granted
  </Directory>

  #modsecurity on
  #modsecurity_rules_file /etc/apache2/modsecurity.d/modsec_rules.conf
</VirtualHost>
